# Flutter Dev Posts on Reddit App

## Preview

### Экран Списка постов
![three post list images](/docs/post-list-big.png)

### Экран Поста
![two post page images](/docs/post-page-big.png)

### Landscape отображение экрана поста
![post page with image landscape](/docs/post-page-with-image-landscape.jpg)
![post page without image landscape](/docs/post-page-without-image-landscape.jpg)

## Описание работы приложения

- При запуске приложения читаются сохранные посты из локальной базы данных
- На экране списка постов можно обновить список постов, нажав на кнопку в правом верхнем углу экрана или потянув список постов вниз (pull to refresh)
	- Новые посты добавяться в начало списка и сохранятся в базе данных, старые посты изменяться, посты в которых есть изменения, изменятся, также изменения перезапишутся в базе данных
	- Если при обновлении произойдет какая-то ошибка, сверзу появится снек бар с сообщением об ошибке
- При клике на пост, откроется экран с подробной информацией об этом посте

## Немножечко костылей

### Об иконке обновления (кнопке обновления постов)

Моя идея заключалась в том, чтобы иконка вращалась при обновлении и при окончании обновления она докрутилась до начального положения

![update button code](/docs/update-button-crutch.png)

Мне нужно было узнать, когда анимация вращения иконки завершилась, не считая при этом анимацию докручивания иконки, поэтому я добавил флаг, который был поднят только во время вращения иконки, не включая докручивание, иначе если просто использовать флаги AnimationController'a, анимация вращения иконки не запустить, если начать обновление во время докручивания иконки
Вероятно есть более лучшее решение
### О кешировании постов и их изображений (базе данных)

Я использовал Hive как локальное хранилище постов, через некоторое время понял, что в Hive объекты сортируются автоматически по ключам, и у меня нет возможности добавить объекты на какое-то нн-ое место (в данном случае мне нужно было добавлять посты в начало списка(хранилища))

Лучшим решением наверно было бы использоваться другой вариант хранилища, но у меня не было времени всё переделывать, поэтому я решил сохранять порядок постов (сохранять его локально), и читать посты из хранилища в нужном порядке

Сохранение изображений постов я тоже сделал очень примитивно, не успел полностью отладить его работу, скорее всего там могут присутствовать баги

## Другое

При написании приложения использовал Bloc как стейт-менеджмент
Связку Bloc + Freezed использовал первый раз

На всю работу у меня ушло примерно 16 часов, но я часто отвлекался